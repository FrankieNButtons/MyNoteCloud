# 引导置换术

使用Windows系统（含WinPE）的`diskpart`工具巧解政府机器主板写死引导无法调整系统顺序的问题

## 使用Windows启动主机并使用管理员模式打开`Powershell`终端（`cmd`亦可）

```powershell
diskpart                        # 进入diskpart
list disk                       # 列出所有磁盘
sel disk your_disk_number       # 选择含efi引导磁盘
list part                       # 列出所有分区
sel part your_partition_number  # 选择efi引导分区
assign letter=X                 # 分配X盘符
exit
```

## 将`X:\EFI\Microsoft\Boot`目录下的Windows的引导文件`bootmgfw.efi`重命名为`bootmgfw.efi.bak`

## 将`X:/ubuntu`的三个引导文件拷贝入`X:\EFI\Microsoft\Boot`目录下，并将`***.efi`重命名为Windows的引导文件`bootmgfw.efi`

## 重启并进入系统BIOS，选择`Windows Bootstrap Manager`，进入Ubuntu系统（此时选择Windows Bootstrap Manager会找不到引导，因此使用Ubuntu系统修改grub指向的Windows引导）

## 将Ubuntu在Ubuntu系统中修改grub的引导顺序，将Windows的引导项指向路径`EFI/Microsoft/Boot/bootmgfw.efi.bak`

## 重启并进入系统BIOS，选择`Windows Bootstrap Manager`，进入grub系统